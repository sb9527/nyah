{"version":3,"sources":["utils/history.js","components/Avatar.js","views/Profile.js","components/PrivateRoute.js","components/VoiceNavBar.js","config.js","utils/api.js","actions/voice.js","components/Voice.js","utils/helpers.js","components/VoiceList.js","components/NewVoice.js","components/VoicePage.js","views/Voice.js","actions/auth.js","actions/share.js","App.js","serviceWorker.js","reducers/index.js","reducers/user.js","reducers/auth.js","reducers/voice.js","middlewares/logger.js","middlewares/index.js","index.js"],"names":["createBrowserHistory","useStyles","makeStyles","theme","avatar","position","top","right","NavBar","useSelector","state","isAuthenticated","auth","auth0","loading","user","shallowEqual","classes","React","useState","anchorEl","setAnchorEl","open","Boolean","className","Avatar","alt","onClick","event","currentTarget","src","picture_url","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","history","push","logout","IconButton","aria-label","aria-controls","aria-haspopup","loginWithRedirect","color","hljs","registerLanguage","json","Profile","codeBlockRef","useRef","useEffect","current","highlightBlock","getTokenSilently","then","token","console","log","picture","nickname","email","ref","style","textAlign","JSON","stringify","PrivateRoute","Component","component","path","rest","a","async","appState","targetUrl","loginWithRedirect_","VoiceNavBar","to","exact","config","addAuthHeader","axios","interceptors","request","use","headers","error","Promise","reject","createUser","auth0_user_id","url","method","data","response","toggleVoice","type","authedUser","handleToggleVoice","dispatch","getState","showLoading","voice_id","user_id","toggleLikeVoice","catch","hideLoading","handleAddVoice","text","replying_to","cb","author_id","pictures","createVoice","res","voice","err","handleReceiveVoices","getVoices","voices_","voices","reduce","acc","cur","Voice","voiceId","useDispatch","setPictureUrl","setNickname","setText","hasLiked","setHasLiked","likeCount","setLikeCount","replyCount","setReplyCount","timestamp","setTimestamp","parent","setParent","author","likes","includes","length","replies","create_time","backgroundImage","backgroundSize","backgroundPosition","d","Date","toLocaleTimeString","toLocaleDateString","formatDate","e","preventDefault","window","location","pathname","handleLike","VoiceList","Object","keys","sort","b","map","key","NewVoice","props","toHome","setToHome","voiceLeft","setVoiceLeft","onSubmit","replyingTo","maxLength","value","onChange","textValue","target","VoicePage","match","params","setReplies","replyId","setIsAuthenticated","setUser","handleInitial","initOptions","onRedirectCallback","createAuth0Client","auth0FromHook","search","handleRedirectCallback","getUser","initAuth0","handleAuth","DEFAULT_REDIRECT_CALLBACK","replaceState","document","title","App","hostname","combineReducers","action","popupOpen","filter","userId","loadingBar","loadingBarReducer","logger","store","next","group","returnValue","groupEnd","applyMiddleware","thunk","createStore","reducer","middleware","ReactDOM","render","domain","auth_config","client_id","clientId","audience","redirect_uri","origin","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ac85a707.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history'\n\nexport default createBrowserHistory()","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { useSelector, shallowEqual } from 'react-redux'\nimport history from '../utils/history'\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    position: 'fixed',\n    top:20,\n    right:50\n  },\n}));\n\nexport default function NavBar() {\n  const { isAuthenticated, auth0, loading, user} = useSelector(state => ({\n    isAuthenticated:state.auth['isAuthenticated'],\n    auth0:state.auth['auth0'],\n    loading:state.auth['loading'],\n    user:state.user\n  }), shallowEqual);\n\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  if(loading){\n    return <div>loading</div>\n  }\n\n  return (\n    <div className={classes.avatar}>\n      {isAuthenticated && (\n        <div>\n          <Avatar alt=\"user\" onClick={handleMenu} src={user.picture_url} />\n          <Menu\n            id=\"menu-appbar\"\n            anchorEl={anchorEl}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            open={open}\n            onClose={handleClose}\n          >\n            <MenuItem onClick={() => history.push('./profile')}>Profile</MenuItem>\n            <MenuItem onClick={() => auth0.logout()}>Log Out</MenuItem>\n          </Menu>\n        </div>\n      )}\n      {!isAuthenticated &&\n        <div>\n          <IconButton\n            aria-label=\"account of current user\"\n            aria-controls=\"menu-appbar\"\n            aria-haspopup=\"true\"\n            onClick={() => auth0.loginWithRedirect({})}\n            color=\"inherit\"\n          >\n            <AccountCircle />\n          </IconButton>\n        </div>\n      }\n    </div>\n  );\n}","import React, { Fragment, useRef, useEffect } from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\n\nimport hljs from 'highlight.js/lib/highlight';\nimport json from 'highlight.js/lib/languages/json';\nimport 'highlight.js/styles/dark.css';\n\nhljs.registerLanguage('json', json);\n\n\nconst Profile = () => {\n\tconst { loading ,user, auth0 } = useSelector(state => ({\n\t\tloading:state.auth['loading'],\n\t\tuser:state.user,\n\t\tauth0:state.auth['auth0']\n\t}), shallowEqual)\n\n\tconst codeBlockRef = useRef(null)\n\n\tuseEffect(() => {\n\t\tcodeBlockRef&&\n\t\tcodeBlockRef.current&&\n\t\thljs.highlightBlock(codeBlockRef.current)\n\n\t\tauth0.getTokenSilently().then(token => console.log('token:', token))\n\t})\n\tif(loading || !user){\n\t\treturn <div>loading</div>\n\t}\n\treturn (\n\t\t<Fragment>\n\t\t\t<img src={user.picture} alt='avatar'/>\n\n\t\t\t<h2>{user.nickname}</h2>\n\t\t\t<p>{user.email}</p>\n\t\t\t<pre>\n\t\t\t\t<code ref={codeBlockRef} className='json' style={{textAlign:'left'}}>\n\t\t\t\t\t{JSON.stringify(user, null, 1)}\n\t\t\t\t</code>\n\t\t\t</pre>\n\t\t</Fragment>\n\t)\n}\n\nexport default Profile","import React, {useEffect} from 'react'\nimport { Route } from 'react-router-dom'\nimport { useSelector, shallowEqual} from 'react-redux'\n\nfunction PrivateRoute({component:Component, path, ...rest}){\n\tconst { isAuthenticated, auth0, loading } = useSelector(state => ({\n\t\tisAuthenticated:state.auth['isAuthenticated'],\n\t\tauth0:state.auth['auth0'],\n\t\tloading:state.auth['loading']\n\t}), shallowEqual)\n\n\tuseEffect(() => {\n\t\tif(loading || isAuthenticated){\n\t\t\treturn\n\t\t}\n\n\t\tif(auth0.loginWithRedirect){\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(path)\n\t\t}\n\t}, [isAuthenticated, auth0, path, loading])\n\n\treturn <Route path={path} {...rest} component={isAuthenticated ? Component:null} />\n}\n\nexport default PrivateRoute\n","import React from 'react'\nimport { NavLink } from 'react-router-dom'\n\nfunction VoiceNavBar(){\n\treturn (\n\t\t<div className='nav'>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to='/' exact>Home</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to='/new'>New Voice</NavLink>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n\nexport default VoiceNavBar","export const config = {\n\tHOST:'http://localhost:5000',\n\t// HOST:'https://nyah.herokuapp.com/',\n}\nexport const path = {\n\tUSER:'/users',\n\tVOICE:'/voices',\n}","import axios from 'axios'\nimport { config, path } from '../config'\n\nexport function addAuthHeader(token){\n\taxios.interceptors.request.use(function (config) {\n\t\tconfig.headers = {\n\t\t\t...config.headers,\n\t\t\t'Authorization':  `Bearer ${token}`\n\t\t}\n\t    return config;\n\t  }, function (error) {\n\t    // Do something with request error\n\t    return Promise.reject(error);\n\t  });\n}\n\nexport function createUser({auth0_user_id, nickname, picture_url}){\n\treturn axios({\n\t\t  url:config.HOST + path.USER,\n          method:'POST',\n          headers:{\n            'content-type':'application/json',\n            'Accept':'application/json'\n          },\n          data:{\n            auth0_user_id,\n            nickname,\n            picture_url\n          }\n        }).then(response => response.data)\n}\n\nexport function getVoices(page=1){\n\treturn axios({\n\t\turl:config.HOST + path.VOICE + '?page=1'\n\t}).then(response => response.data)\n}\n\nexport function createVoice({ text, author_id, replying_to=null, pictures=null}){\n\treturn axios({\n\t\turl:config.HOST + path.VOICE, \n\t\tmethod:'POST',\n\t\theaders:{\n\t\t\t'content-type':'application/json',\n\t\t\t'Accept':'application/json',\n\t\t},\n\t\tdata:{\n\t\t\ttext,\n\t\t\tauthor_id,\n\t\t\treplying_to,\n\t\t\tpictures\n\t\t}\n\t}).then(response => response.data)\n}\n\nexport function toggleLikeVoice({ voice_id, user_id}){\n\treturn axios({\n\t\turl:`${config.HOST}/voices/${voice_id}/like`,\n\t\tmethod:'POST',\n\t\theaders:{\n\t\t\t'Content-Type':'application/json',\n\t\t\t'Accept':'application/json'\n\t\t},\n\t\tdata:{\n\t\t\tuser_id\n\t\t}\n\t})\n}","import { createVoice, getVoices, toggleLikeVoice } from '../utils/api'\nimport { showLoading, hideLoading } from 'react-redux-loading-bar'\n\nexport const RECEIVE_VOICES = 'RECEIVE_VOICES'\nexport const ADD_VOICE = 'ADD_VOICE'\nexport const TOGGLE_VOICE  = 'TOGGLE_LIKE'\n\nexport function receiveVoices(voices){\n\treturn {\n\t\ttype:RECEIVE_VOICES,\n\t\tvoices\n\t}\n}\n\nexport function addVoice(voice){\n\treturn {\n\t\ttype:ADD_VOICE,\n\t\tvoice\n\t}\n}\n\nexport function toggleVoice({ id, authedUser}){\n\treturn {\n\t\ttype:TOGGLE_VOICE,\n\t\tid,\n\t\tauthedUser\n\t}\n}\n\nexport function handleToggleVoice(id){\n\treturn (dispatch, getState) => {\n\t\tdispatch(showLoading())\n\t\tconst { user:{id:authedUser} } = getState()\n\t\tdispatch(toggleVoice({id, authedUser}))\n\t\ttoggleLikeVoice({voice_id:id, user_id:authedUser}).then(() => {\n\t\t}).catch(() => {\n\t\t\tdispatch(toggleVoice({id, authedUser}))\n\t\t}).then(() => {\n\t\t\tdispatch(hideLoading())\n\t\t})\n\t}\n}\n\nexport function handleAddVoice(text, replying_to, cb){\n\treturn (dispatch, getState) => {\n\t\tdispatch(showLoading())\n\t\tconst { user:{id} } = getState()\n\t\tcreateVoice({ text, author_id:id, replying_to}).then(res => {\n\t\t\tdispatch(addVoice(res.voice))\n\t\t\tcb()\n\t\t\tdispatch(hideLoading())\n\t\t}).catch(err => {\n\t\t\tdispatch(hideLoading())\n\t\t\tcb()\n\t\t})\n\t}\n}\n\nexport function handleReceiveVoices(){\n\treturn dispatch => {\n\t\tdispatch(showLoading())\n\t\tconsole.log('handleReceiveVoices!')\n\t\tgetVoices().then(res => {\n\t\t\tconst voices_ = res.voices.reduce((acc, cur) => ({...acc, [cur.id]:cur}), {})\n\t\t\tdispatch(receiveVoices(voices_))\n\t\t\tdispatch(hideLoading())\n\t\t})\n\t}\n}","import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport Favorite from '@material-ui/icons/Favorite';\nimport Reply from '@material-ui/icons/Reply';\nimport { handleToggleVoice } from '../actions/voice'\nimport { formatDate } from '../utils/helpers'\nimport history from '../utils/history'\n\nexport default function Voice({ id:voiceId }){\n\tconst voices = useSelector(state => state.voices, shallowEqual)\n\tconst voice = useSelector(state => state.voices[voiceId], shallowEqual)\n\tconst authedUser = useSelector(state => state.user.id)\n\tconst dispatch = useDispatch()\n\tconst auth = useSelector(state => state.auth)\n\n\tconst [picture_url, setPictureUrl] = useState()\n\tconst [nickname, setNickname] = useState()\n\tconst [text, setText] = useState()\n\tconst [hasLiked, setHasLiked] = useState()\n\tconst [likeCount, setLikeCount] = useState()\n\tconst [replyCount, setReplyCount] = useState()\n\tconst [timestamp, setTimestamp] = useState()\n\tconst [parent, setParent] = useState()\n\n\tuseEffect(() => {\n\t\tif(voice){\n\t\t\tsetPictureUrl(voice.author.picture_url)\n\t\t\tsetNickname(voice.author.nickname)\n\t\t\tsetText(voice.text)\n\t\t\tsetHasLiked(voice.likes.includes(authedUser))\n\t\t\tsetLikeCount(voice.likes.length)\n\t\t\tsetReplyCount(voice.replies.length)\t\n\t\t\tsetTimestamp(voice.create_time)\t\n\t\t\tvoice.replying_to && setParent(voices[voice.replying_to])\n\t\t}\n\t}, [voiceId, voices, authedUser, dispatch, voice, parent])\n\n\n\tconst handleLike = (e) => {\n\t\te.preventDefault()\n\t\tif(auth.isAuthenticated){\n\t\t\tdispatch(handleToggleVoice(voiceId))\n\t\t}\n\t\telse {\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth.auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(window.location.pathname)\n\t\t}\n\t}\n\n\tconst toParent = e => {\n\t\te.preventDefault()\n\n\t\thistory.push(`/${parent.id}`)\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<Link className='tweet' to={`/${voiceId}`}>\n\t\t\t\t<div \n\t\t\t\t\tstyle={{backgroundImage:`url(${picture_url})`, backgroundSize:'cover', backgroundPosition:'center'}}\n\t\t\t\t\talt={`Avatar of ${nickname}`} \n\t\t\t\t\tclassName='avatar'></div>\n\t\t\t\t<div className='tweet-info'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{nickname}</span>\n\t\t\t\t\t\t{<div>{formatDate(timestamp)}</div>}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparent && <button className='replying-to' onClick={toParent}>回复 @{parent.author.nickname}</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p>{text}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='tweet-icons'>\n\t\t\t\t\t\t<Reply className='tweet-icon'/>\n\t\t\t\t\t\t<span>{replyCount!==0 && replyCount}</span>\n\t\t\t\t\t\t<button className='heart-button' onClick={e => handleLike(e)}>\n\t\t\t\t\t\t\t{hasLiked === true ? \n\t\t\t\t\t\t\t\t<Favorite className='tweet-icon' style={{color:'#e0245e'}} /> : \n\t\t\t\t\t\t\t\t<FavoriteBorder className='tweet-icon' />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span>{likeCount!==0 && likeCount}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t</div>\n\t)\n}","export function formatDate (timestamp) {\n  const d = new Date(timestamp*1000)\n  const time = d.toLocaleTimeString('zh-CN')\n  const date = d.toLocaleDateString()\n  return time + ' | ' + date\n}","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport Voice from './Voice'\n\nexport default function VoiceList(){\n\tconst voices = useSelector(state => state.voices)\n\n\treturn (\n\t\t<div>\n\t\t\t<ul>\n\t\t\t\t{Object.keys(voices).sort((a ,b) => b.create_time - a.create_time).map(id => (<li key={id}><Voice id={id}/></li>))}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}","import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { handleAddVoice } from '../actions/voice'\nimport { Redirect } from 'react-router-dom'\n\n\nexport default function NewVoice(props){\n\tconst auth = useSelector(state => state.auth)\n\tconst [text, setText] = useState('')\n\tconst [toHome, setToHome] = useState()\n\tlet [voiceLeft, setVoiceLeft] = useState(120-text.length)\n\n\tconst dispatch = useDispatch()\n\n\tuseEffect(() => {\n\t\tsetVoiceLeft(120-text.length)\n\t}, [text])\n\n\tconst handleChange = e => {\n\t    const textValue = e.target.value\n\t    setText(textValue)\n\t    setToHome(false)\n\t}\n\n\tconst handleSubmit = e => {\n\t    e.preventDefault()\n\n\t\tif(auth.isAuthenticated){\n\t\t    const replyingTo = props.replyingTo\n\t\t    dispatch(handleAddVoice(text, replyingTo, () => {\n\t\t        setText('')\n\t\t        setToHome(replyingTo ? false : true)\n\t\t    }))\n\t\t}\n\t\telse {\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth.auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(window.location.pathname)\n\t\t}\n\t}\n\n\tif(toHome === true) {\n\t\treturn <Redirect exact to='/'/>\n\t}\n\n\treturn (\n\t    <div>\n\t\t\t<h1 className='center'>New Voice</h1>\t\t\n\t\t\t<form className='new-tweet' onSubmit={handleSubmit}>\n\t\t\t\t<textarea \n\t\t\t\t\tclassName='textarea'\n\t\t\t\t\tmaxLength='120'\n\t\t\t\t\tvalue={text}\n\t\t\t\t\tonChange={handleChange} />\n\t\t\t\t{voiceLeft <= 100 && <div className='tweet-length'>{voiceLeft}</div>}\n\t\t\t<button type='submit' className='btn'>Submit</button>\n\t\t\t</form>\t\n\t\t</div>\n\t)\n}","import React, { useEffect, useState } from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\nimport Voice from './Voice'\nimport NewVoice from './NewVoice'\n\n\nexport default function VoicePage({match:{params:{id}}}){\n\n\tconst voice = useSelector(state => state.voices[id], shallowEqual)\n\tconst [replies, setReplies] = useState([]) \n\tuseEffect(() => {\n\t\tif(voice){\n\t\t\tsetReplies(voice.replies ? voice.replies : [])\n\t\t}\n\t}, [id, voice])\n\tif(!voice){\n\t\treturn <div>this voice does not exist. </div>\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<Voice id={id} />\n\t\t\t<NewVoice replyingTo={id}/>\n\t\t\t{replies.length !== 0 && \n\t\t\t\t<ul>\n\t\t\t\t\t{replies.map(replyId => (<li key={replyId}><Voice id={replyId} /></li>))}\t\t\t\n\t\t\t\t</ul>}\n\t\t</div>\n\t)\n\n}","import React from 'react'\nimport VoiceNavBar from '../components/VoiceNavBar'\nimport VoiceList from '../components/VoiceList'\nimport NewVoice from '../components/NewVoice'\nimport VoicePage from '../components/VoicePage'\nimport { Switch, Route } from 'react-router-dom'\n\nfunction Voice(){\n\treturn (\n\t\t<div>\n\t\t\t<VoiceNavBar />\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/' component={VoiceList} />\n\t\t\t\t<Route path='/new' component={NewVoice} />\t\n\t\t\t\t<Route path='/:id' component={VoicePage} />\t\t\n\t\t\t</Switch>\n\t\t</div>\n\t\t)\n}\n\nexport default Voice","import createAuth0Client from \"@auth0/auth0-spa-js\"; \nimport { createUser, addAuthHeader } from '../utils/api'\n\nimport { showLoading, hideLoading } from 'react-redux-loading-bar'\n\nexport const SET_IS_AUTHENTICATED = 'SET_IS_AUTHENTICATED'\nexport const SET_USER = 'SET_USER'\nexport const SET_AUTH0 = 'SET_AUTH0'\nexport const SET_LOADING = 'SET_LOADING'\nexport const SET_POPUP_OPEN = 'SET_POPUP_OPEN'\n\nexport function setIsAuthenticated(isAuthenticated){\n        return {\n                type:SET_IS_AUTHENTICATED,\n                isAuthenticated\n        }\n}\n\nexport function setUser(user){\n        return {\n                type:SET_USER,\n                user\n        }\n}\n\nexport function setAuth0(auth0){\n        return {\n                type:SET_AUTH0,\n                auth0\n        }\n}\n\nexport function setLoading(loading){\n  return {\n          type:SET_LOADING,\n          loading\n  }\n}\n\nexport function setPopupOpen(popupOpen){\n  return {\n          type:SET_POPUP_OPEN,\n          popupOpen\n  }\n}\n\nexport function handleAuth(initOptions, onRedirectCallback){\n    return dispatch => {\n      const initAuth0 = async () =>{\n        dispatch(showLoading())\n        const auth0FromHook = await createAuth0Client(initOptions);\n\n        dispatch(setAuth0(auth0FromHook));\n\n        if (window.location.search.includes(\"code=\") &&\n            window.location.search.includes(\"state=\")) {\n          const { appState } = await auth0FromHook.handleRedirectCallback();\n          onRedirectCallback(appState);\n        }\n\n        const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n        dispatch(setIsAuthenticated(isAuthenticated))\n\n        if (isAuthenticated) {\n          const user = await auth0FromHook.getUser();\n\n          // 请求创建用户接口\n          await createUser({\n              auth0_user_id:user['sub'],\n              nickname:user['nickname'],\n              picture_url:user['picture']\n          }).then(res => {\n              dispatch(setUser(res['user']));\n          })\n\n          auth0FromHook.getTokenSilently().then(token => addAuthHeader(token))\n        }\n        dispatch(hideLoading())\n        dispatch(setLoading(false));\n      }\n\n      initAuth0()\n    };  \n}","import { handleAuth } from './auth'\nimport { handleReceiveVoices } from './voice'\n\nexport function handleInitial(initOptions, onRedirectCallback){\n\treturn dispatch => {\n\t\tdispatch(handleAuth(initOptions, onRedirectCallback))\n\t\tdispatch(handleReceiveVoices())\n\t}\n}","import React, {  useEffect } from 'react';\nimport { Router, Route, Switch } from 'react-router-dom'\nimport history from './utils/history'\nimport './App.css';\nimport Avatar from './components/Avatar'\nimport Profile from './views/Profile'\nimport PrivateRoute from './components/PrivateRoute'\nimport Voice from './views/Voice'\nimport { useDispatch } from 'react-redux'\nimport { handleInitial } from './actions/share'\nimport LoadingBar from 'react-redux-loading-bar'\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nfunction App({\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  ...initOptions\n}) {\n  const dispatch = useDispatch()\n  useEffect(() => {\n    dispatch(handleInitial(initOptions, onRedirectCallback))\n  })\n\n  return (\n    <div className=\"App\">\n    \t<Router history={history}>\n        <LoadingBar />\n    \t\t<header>\n    \t\t\t<Avatar />\n    \t\t</header>\n        <main className=\"main\">\n          <Switch>\n            <PrivateRoute exact path={'/profile'} component={Profile} /> \n            <Route path={'/'} component={Voice}/>\n          </Switch>           \n        </main>\n    \t</Router>\n    </div>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import auth from './auth'\nimport voices from './voice'\nimport user from './user'\nimport { combineReducers } from 'redux'\nimport { loadingBarReducer } from 'react-redux-loading-bar'\n\nexport default combineReducers({\n\tuser,\n\tauth,\n\tvoices,\n\tloadingBar:loadingBarReducer\n})","import { SET_USER } from '../actions/auth'\nexport default function user(state = {}, action){\n\tswitch(action.type){\n\t\tcase SET_USER:\n\t\t\treturn {\n\t\t\t\t...action['user']\n\t\t\t}\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","import { SET_IS_AUTHENTICATED, SET_AUTH0, SET_LOADING, SET_POPUP_OPEN } from '../actions/auth'\nexport default function auth(state = {loading:true}, action){\n\tswitch(action.type){\n\t\tcase SET_IS_AUTHENTICATED:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisAuthenticated:action['isAuthenticated']\n\t\t\t}\n\t\tcase SET_AUTH0:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tauth0:action['auth0']\n\t\t\t}\n\t\tcase SET_LOADING:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading:action['loading']\n\t\t\t}\n\t\tcase SET_POPUP_OPEN:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpopupOpen:action['popupOpen']\n\t\t\t}\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","import { RECEIVE_VOICES, ADD_VOICE, TOGGLE_VOICE } from '../actions/voice'\n\nexport default function voices(state = {}, action){\n\tswitch(action.type){\n\t\tcase RECEIVE_VOICES:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.voices\n\t\t\t}\n\t\tcase ADD_VOICE:\n\t\t\tconst voice = action.voice\n\t\t\tlet parent = {}\n\t\t\tif(voice.replying_to){\n\t\t\t\tparent = {\n\t\t\t\t\t[voice.replying_to]:{\n\t\t\t\t\t\t...state[voice.replying_to],\n\t\t\t\t\t\treplies:[...state[voice.replying_to].replies, voice.id]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[voice.id]:voice,\n\t\t\t\t...parent\n\t\t\t}\n\t\tcase TOGGLE_VOICE:\n\t\t\tconst { id:voiceId, authedUser } = action\n\t\t\tconst hasLiked = state[voiceId].likes.includes(authedUser)\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[voiceId]:{\n\t\t\t\t\t...state[voiceId],\n\t\t\t\t\tlikes:hasLiked ? state[voiceId].likes.filter(userId => userId !== authedUser) : [...state[voiceId].likes, authedUser]\n\t\t\t\t}\n\t\t\t}\n\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","const logger = store => next => action => {\n\tconsole.group(action.type)\n\t\tconsole.log('the action is : ', action)\n\t\tconst returnValue = next(action)\n\t\tconsole.log('the state is : ', store.getState())\n\tconsole.groupEnd()\n\n\treturn returnValue\n}\n\nexport default logger","import thunk from 'redux-thunk'\nimport logger from './logger'\nimport { applyMiddleware } from 'redux'\n\nexport default applyMiddleware(thunk, logger)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport history from './utils/history'\nimport auth_config from './auth_config'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport reducer from './reducers'\nimport middleware from './middlewares'\n\nconst onRedirectCallback = appState => {\n  history.push(\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nconst store = createStore(reducer, middleware)\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App\n\t\tdomain={auth_config.domain}\n\t\tclient_id={auth_config.clientId}\n\t\taudience={auth_config.audience}\n\t\tredirect_uri={window.location.origin}\n\t\tonRedirectCallback={onRedirectCallback}\n\t\t/>\n\t</Provider>\n\t, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}