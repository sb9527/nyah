{"version":3,"sources":["utils/history.js","components/Avatar.js","views/Profile.js","components/PrivateRoute.js","components/VoiceNavBar.js","config.js","utils/api.js","actions/voice.js","components/Voice.js","utils/helpers.js","components/VoiceList.js","components/NewVoice.js","components/VoicePage.js","views/Voice.js","actions/auth.js","actions/share.js","App.js","serviceWorker.js","reducers/index.js","reducers/user.js","reducers/auth.js","reducers/voice.js","middlewares/logger.js","middlewares/index.js","index.js"],"names":["createBrowserHistory","useStyles","makeStyles","theme","avatar","position","top","right","NavBar","useSelector","state","isAuthenticated","auth","auth0","loading","user","shallowEqual","classes","React","useState","anchorEl","setAnchorEl","open","Boolean","className","Avatar","alt","onClick","event","currentTarget","src","picture_url","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","history","push","logout","IconButton","aria-label","aria-controls","aria-haspopup","loginWithRedirect","color","hljs","registerLanguage","json","Profile","codeBlockRef","useRef","useEffect","current","highlightBlock","getTokenSilently","then","token","console","log","picture","nickname","email","ref","style","textAlign","JSON","stringify","PrivateRoute","Component","component","path","rest","a","async","appState","targetUrl","loginWithRedirect_","VoiceNavBar","to","exact","config","createUser","auth0_user_id","fetch","method","headers","body","response","toggleVoice","type","authedUser","handleToggleVoice","dispatch","getState","showLoading","voice_id","user_id","toggleLikeVoice","catch","hideLoading","handleAddVoice","text","replying_to","cb","author_id","pictures","createVoice","res","voice","handleReceiveVoices","getVoices","voices_","voices","reduce","acc","cur","Voice","voiceId","useDispatch","setPictureUrl","setNickname","setText","hasLiked","setHasLiked","likeCount","setLikeCount","replyCount","setReplyCount","timestamp","setTimestamp","parent","setParent","author","likes","includes","length","replies","create_time","backgroundImage","backgroundSize","backgroundPosition","d","Date","toLocaleTimeString","toLocaleDateString","formatDate","e","preventDefault","window","location","pathname","handleLike","VoiceList","Object","keys","sort","b","map","key","NewVoice","props","toHome","setToHome","voiceLeft","setVoiceLeft","onSubmit","replyingTo","maxLength","value","onChange","textValue","target","VoicePage","match","params","setReplies","replyId","setIsAuthenticated","setUser","handleInitial","initOptions","onRedirectCallback","createAuth0Client","auth0FromHook","search","handleRedirectCallback","getUser","initAuth0","handleAuth","DEFAULT_REDIRECT_CALLBACK","replaceState","document","title","App","hostname","combineReducers","action","popupOpen","filter","userId","loadingBar","loadingBarReducer","logger","store","next","group","returnValue","groupEnd","applyMiddleware","thunk","createStore","reducer","middleware","ReactDOM","render","domain","auth_config","client_id","clientId","audience","redirect_uri","origin","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c5734159.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history'\n\nexport default createBrowserHistory()","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { useSelector, shallowEqual } from 'react-redux'\nimport history from '../utils/history'\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    position: 'fixed',\n    top:20,\n    right:50\n  },\n}));\n\nexport default function NavBar() {\n  const { isAuthenticated, auth0, loading, user} = useSelector(state => ({\n    isAuthenticated:state.auth['isAuthenticated'],\n    auth0:state.auth['auth0'],\n    loading:state.auth['loading'],\n    user:state.user\n  }), shallowEqual);\n\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  if(loading){\n    return <div>loading</div>\n  }\n\n  return (\n    <div className={classes.avatar}>\n      {isAuthenticated && (\n        <div>\n          <Avatar alt=\"user\" onClick={handleMenu} src={user.picture_url} />\n          <Menu\n            id=\"menu-appbar\"\n            anchorEl={anchorEl}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            open={open}\n            onClose={handleClose}\n          >\n            <MenuItem onClick={() => history.push('./profile')}>Profile</MenuItem>\n            <MenuItem onClick={() => auth0.logout()}>Log Out</MenuItem>\n          </Menu>\n        </div>\n      )}\n      {!isAuthenticated &&\n        <div>\n          <IconButton\n            aria-label=\"account of current user\"\n            aria-controls=\"menu-appbar\"\n            aria-haspopup=\"true\"\n            onClick={() => auth0.loginWithRedirect({})}\n            color=\"inherit\"\n          >\n            <AccountCircle />\n          </IconButton>\n        </div>\n      }\n    </div>\n  );\n}","import React, { Fragment, useRef, useEffect } from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\n\nimport hljs from 'highlight.js/lib/highlight';\nimport json from 'highlight.js/lib/languages/json';\nimport 'highlight.js/styles/dark.css';\n\nhljs.registerLanguage('json', json);\n\n\nconst Profile = () => {\n\tconst { loading ,user, auth0 } = useSelector(state => ({\n\t\tloading:state.auth['loading'],\n\t\tuser:state.user,\n\t\tauth0:state.auth['auth0']\n\t}), shallowEqual)\n\n\tconst codeBlockRef = useRef(null)\n\n\tuseEffect(() => {\n\t\tcodeBlockRef&&\n\t\tcodeBlockRef.current&&\n\t\thljs.highlightBlock(codeBlockRef.current)\n\n\t\tauth0.getTokenSilently().then(token => console.log('token:', token))\n\t})\n\tif(loading || !user){\n\t\treturn <div>loading</div>\n\t}\n\treturn (\n\t\t<Fragment>\n\t\t\t<img src={user.picture} alt='avatar'/>\n\n\t\t\t<h2>{user.nickname}</h2>\n\t\t\t<p>{user.email}</p>\n\t\t\t<pre>\n\t\t\t\t<code ref={codeBlockRef} className='json' style={{textAlign:'left'}}>\n\t\t\t\t\t{JSON.stringify(user, null, 1)}\n\t\t\t\t</code>\n\t\t\t</pre>\n\t\t</Fragment>\n\t)\n}\n\nexport default Profile","import React, {useEffect} from 'react'\nimport { Route } from 'react-router-dom'\nimport { useSelector, shallowEqual} from 'react-redux'\n\nfunction PrivateRoute({component:Component, path, ...rest}){\n\tconst { isAuthenticated, auth0, loading } = useSelector(state => ({\n\t\tisAuthenticated:state.auth['isAuthenticated'],\n\t\tauth0:state.auth['auth0'],\n\t\tloading:state.auth['loading']\n\t}), shallowEqual)\n\n\tuseEffect(() => {\n\t\tif(loading || isAuthenticated){\n\t\t\treturn\n\t\t}\n\n\t\tif(auth0.loginWithRedirect){\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(path)\n\t\t}\n\t}, [isAuthenticated, auth0, path, loading])\n\n\treturn <Route path={path} {...rest} component={isAuthenticated ? Component:null} />\n}\n\nexport default PrivateRoute\n","import React from 'react'\nimport { NavLink } from 'react-router-dom'\n\nfunction VoiceNavBar(){\n\treturn (\n\t\t<div className='nav'>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to='/' exact>Home</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to='/new'>New Voice</NavLink>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n\nexport default VoiceNavBar","export const config = {\n\t// HOST:'http://localhost:5000',\n\tHOST:'https://nyah.herokuapp.com/',\n}\nexport const path = {\n\tUSER:'/users',\n\tVOICE:'/voices',\n}","import { config, path } from '../config'\n\nexport function createUser({auth0_user_id, nickname, picture_url}){\n\treturn fetch(config.HOST + path.USER, {\n          method:'POST',\n          headers:{\n            'content-type':'application/json',\n            'Accept':'application/json'\n          },\n          body:JSON.stringify({\n            auth0_user_id,\n            nickname,\n            picture_url\n          })\n        }).then(response => response.json())\n}\n\nexport function getVoices(page=1){\n\treturn fetch(config.HOST + path.VOICE + '?page=1').then(response => response.json())\n}\n\nexport function createVoice({ text, author_id, replying_to=null, pictures=null}){\n\treturn fetch(config.HOST + path.VOICE, {\n\t\tmethod:'POST',\n\t\theaders:{\n\t\t\t'content-type':'application/json',\n\t\t\t'Accept':'application/json',\n\t\t},\n\t\tbody:JSON.stringify({\n\t\t\ttext,\n\t\t\tauthor_id,\n\t\t\treplying_to,\n\t\t\tpictures\n\t\t})\n\t}).then(response => response.json())\n}\n\nexport function toggleLikeVoice({ voice_id, user_id}){\n\treturn fetch(`${config.HOST}/voices/${voice_id}/like`, {\n\t\tmethod:'POST',\n\t\theaders:{\n\t\t\t'Content-Type':'application/json',\n\t\t\t'Accept':'application/json'\n\t\t},\n\t\tbody:JSON.stringify({\n\t\t\tuser_id\n\t\t})\n\t})\n}","import { createVoice, getVoices, toggleLikeVoice } from '../utils/api'\nimport { showLoading, hideLoading } from 'react-redux-loading-bar'\n\nexport const RECEIVE_VOICES = 'RECEIVE_VOICES'\nexport const ADD_VOICE = 'ADD_VOICE'\nexport const TOGGLE_VOICE  = 'TOGGLE_LIKE'\n\nexport function receiveVoices(voices){\n\treturn {\n\t\ttype:RECEIVE_VOICES,\n\t\tvoices\n\t}\n}\n\nexport function addVoice(voice){\n\treturn {\n\t\ttype:ADD_VOICE,\n\t\tvoice\n\t}\n}\n\nexport function toggleVoice({ id, authedUser}){\n\treturn {\n\t\ttype:TOGGLE_VOICE,\n\t\tid,\n\t\tauthedUser\n\t}\n}\n\nexport function handleToggleVoice(id){\n\treturn (dispatch, getState) => {\n\t\tdispatch(showLoading())\n\t\tconst { user:{id:authedUser} } = getState()\n\t\tdispatch(toggleVoice({id, authedUser}))\n\t\ttoggleLikeVoice({voice_id:id, user_id:authedUser}).then(() => {\n\t\t}).catch(() => {\n\t\t\tdispatch(toggleVoice({id, authedUser}))\n\t\t}).then(() => {\n\t\t\tdispatch(hideLoading())\n\t\t})\n\t}\n}\n\nexport function handleAddVoice(text, replying_to, cb){\n\treturn (dispatch, getState) => {\n\t\tdispatch(showLoading())\n\t\tconst { user:{id} } = getState()\n\t\tcreateVoice({ text, author_id:id, replying_to}).then(res => {\n\t\t\tdispatch(addVoice(res.voice))\n\t\t\tcb()\n\t\t\tdispatch(hideLoading())\n\t\t})\n\t}\n}\n\nexport function handleReceiveVoices(){\n\treturn dispatch => {\n\t\tdispatch(showLoading())\n\t\tgetVoices().then(res => {\n\t\t\tconst voices_ = res.voices.reduce((acc, cur) => ({...acc, [cur.id]:cur}), {})\n\t\t\tdispatch(receiveVoices(voices_))\n\t\t\tdispatch(hideLoading())\n\t\t})\n\t}\n}","import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport Favorite from '@material-ui/icons/Favorite';\nimport Reply from '@material-ui/icons/Reply';\nimport { handleToggleVoice } from '../actions/voice'\nimport { formatDate } from '../utils/helpers'\nimport history from '../utils/history'\n\nexport default function Voice({ id:voiceId }){\n\tconst voices = useSelector(state => state.voices, shallowEqual)\n\tconst voice = useSelector(state => state.voices[voiceId], shallowEqual)\n\tconst authedUser = useSelector(state => state.user.id)\n\tconst dispatch = useDispatch()\n\tconst auth = useSelector(state => state.auth)\n\n\tconst [picture_url, setPictureUrl] = useState()\n\tconst [nickname, setNickname] = useState()\n\tconst [text, setText] = useState()\n\tconst [hasLiked, setHasLiked] = useState()\n\tconst [likeCount, setLikeCount] = useState()\n\tconst [replyCount, setReplyCount] = useState()\n\tconst [timestamp, setTimestamp] = useState()\n\tconst [parent, setParent] = useState()\n\n\tuseEffect(() => {\n\t\tif(voice){\n\t\t\tsetPictureUrl(voice.author.picture_url)\n\t\t\tsetNickname(voice.author.nickname)\n\t\t\tsetText(voice.text)\n\t\t\tsetHasLiked(voice.likes.includes(authedUser))\n\t\t\tsetLikeCount(voice.likes.length)\n\t\t\tsetReplyCount(voice.replies.length)\t\n\t\t\tsetTimestamp(voice.create_time)\t\n\t\t\tvoice.replying_to && setParent(voices[voice.replying_to])\n\t\t}\n\t}, [voiceId, voices, authedUser, dispatch, voice, parent])\n\n\n\tconst handleLike = (e) => {\n\t\te.preventDefault()\n\t\tif(auth.isAuthenticated){\n\t\t\tdispatch(handleToggleVoice(voiceId))\n\t\t}\n\t\telse {\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth.auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(window.location.pathname)\n\t\t}\n\t}\n\n\tconst toParent = e => {\n\t\te.preventDefault()\n\n\t\thistory.push(`/${parent.id}`)\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<Link className='tweet' to={`/${voiceId}`}>\n\t\t\t\t<div \n\t\t\t\t\tstyle={{backgroundImage:`url(${picture_url})`, backgroundSize:'cover', backgroundPosition:'center'}}\n\t\t\t\t\talt={`Avatar of ${nickname}`} \n\t\t\t\t\tclassName='avatar'></div>\n\t\t\t\t<div className='tweet-info'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{nickname}</span>\n\t\t\t\t\t\t{<div>{formatDate(timestamp)}</div>}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparent && <button className='replying-to' onClick={toParent}>回复 @{parent.author.nickname}</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p>{text}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='tweet-icons'>\n\t\t\t\t\t\t<Reply className='tweet-icon'/>\n\t\t\t\t\t\t<span>{replyCount!==0 && replyCount}</span>\n\t\t\t\t\t\t<button className='heart-button' onClick={e => handleLike(e)}>\n\t\t\t\t\t\t\t{hasLiked === true ? \n\t\t\t\t\t\t\t\t<Favorite className='tweet-icon' style={{color:'#e0245e'}} /> : \n\t\t\t\t\t\t\t\t<FavoriteBorder className='tweet-icon' />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span>{likeCount!==0 && likeCount}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t</div>\n\t)\n}","export function formatDate (timestamp) {\n  const d = new Date(timestamp*1000)\n  const time = d.toLocaleTimeString('zh-CN')\n  const date = d.toLocaleDateString()\n  return time + ' | ' + date\n}","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport Voice from './Voice'\n\nexport default function VoiceList(){\n\tconst voices = useSelector(state => state.voices)\n\n\treturn (\n\t\t<div>\n\t\t\t<ul>\n\t\t\t\t{Object.keys(voices).sort((a ,b) => b.create_time - a.create_time).map(id => (<li key={id}><Voice id={id}/></li>))}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}","import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { handleAddVoice } from '../actions/voice'\nimport { Redirect } from 'react-router-dom'\n\n\nexport default function NewVoice(props){\n\tconst auth = useSelector(state => state.auth)\n\tconst [text, setText] = useState('')\n\tconst [toHome, setToHome] = useState()\n\tlet [voiceLeft, setVoiceLeft] = useState(120-text.length)\n\n\tconst dispatch = useDispatch()\n\n\tuseEffect(() => {\n\t\tsetVoiceLeft(120-text.length)\n\t}, [text])\n\n\tconst handleChange = e => {\n\t    const textValue = e.target.value\n\t    setText(textValue)\n\t    setToHome(false)\n\t}\n\n\tconst handleSubmit = e => {\n\t    e.preventDefault()\n\n\t\tif(auth.isAuthenticated){\n\t\t    const replyingTo = props.replyingTo\n\t\t    dispatch(handleAddVoice(text, replyingTo, () => {\n\t\t        setText('')\n\t\t        setToHome(replyingTo ? false : true)\n\t\t    }))\n\t\t}\n\t\telse {\n\t\t\tconst loginWithRedirect_ = async(path) => {\n\t\t\t\tawait auth.auth0.loginWithRedirect({\n\t\t\t\t\tappState:{\n\t\t\t\t\t\ttargetUrl:path\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tloginWithRedirect_(window.location.pathname)\n\t\t}\n\t}\n\n\tif(toHome === true) {\n\t\treturn <Redirect exact to='/'/>\n\t}\n\n\treturn (\n\t    <div>\n\t\t\t<h1 className='center'>New Voice</h1>\t\t\n\t\t\t<form className='new-tweet' onSubmit={handleSubmit}>\n\t\t\t\t<textarea \n\t\t\t\t\tclassName='textarea'\n\t\t\t\t\tmaxLength='120'\n\t\t\t\t\tvalue={text}\n\t\t\t\t\tonChange={handleChange} />\n\t\t\t\t{voiceLeft <= 100 && <div className='tweet-length'>{voiceLeft}</div>}\n\t\t\t<button type='submit' className='btn'>Submit</button>\n\t\t\t</form>\t\n\t\t</div>\n\t)\n}","import React, { useEffect, useState } from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\nimport Voice from './Voice'\nimport NewVoice from './NewVoice'\n\n\nexport default function VoicePage({match:{params:{id}}}){\n\n\tconst voice = useSelector(state => state.voices[id], shallowEqual)\n\tconst [replies, setReplies] = useState([]) \n\tuseEffect(() => {\n\t\tif(voice){\n\t\t\tsetReplies(voice.replies ? voice.replies : [])\n\t\t}\n\t}, [id, voice])\n\tif(!voice){\n\t\treturn <div>this voice does not exist. </div>\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<Voice id={id} />\n\t\t\t<NewVoice replyingTo={id}/>\n\t\t\t{replies.length !== 0 && \n\t\t\t\t<ul>\n\t\t\t\t\t{replies.map(replyId => (<li key={replyId}><Voice id={replyId} /></li>))}\t\t\t\n\t\t\t\t</ul>}\n\t\t</div>\n\t)\n\n}","import React from 'react'\nimport VoiceNavBar from '../components/VoiceNavBar'\nimport VoiceList from '../components/VoiceList'\nimport NewVoice from '../components/NewVoice'\nimport VoicePage from '../components/VoicePage'\nimport { Switch, Route } from 'react-router-dom'\n\nfunction Voice(){\n\treturn (\n\t\t<div>\n\t\t\t<VoiceNavBar />\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/' component={VoiceList} />\n\t\t\t\t<Route path='/new' component={NewVoice} />\t\n\t\t\t\t<Route path='/:id' component={VoicePage} />\t\t\n\t\t\t</Switch>\n\t\t</div>\n\t\t)\n}\n\nexport default Voice","import createAuth0Client from \"@auth0/auth0-spa-js\"; \nimport { createUser } from '../utils/api'\n\nimport { showLoading, hideLoading } from 'react-redux-loading-bar'\n\nexport const SET_IS_AUTHENTICATED = 'SET_IS_AUTHENTICATED'\nexport const SET_USER = 'SET_USER'\nexport const SET_AUTH0 = 'SET_AUTH0'\nexport const SET_LOADING = 'SET_LOADING'\nexport const SET_POPUP_OPEN = 'SET_POPUP_OPEN'\n\nexport function setIsAuthenticated(isAuthenticated){\n        return {\n                type:SET_IS_AUTHENTICATED,\n                isAuthenticated\n        }\n}\n\nexport function setUser(user){\n        return {\n                type:SET_USER,\n                user\n        }\n}\n\nexport function setAuth0(auth0){\n        return {\n                type:SET_AUTH0,\n                auth0\n        }\n}\n\nexport function setLoading(loading){\n  return {\n          type:SET_LOADING,\n          loading\n  }\n}\n\nexport function setPopupOpen(popupOpen){\n  return {\n          type:SET_POPUP_OPEN,\n          popupOpen\n  }\n}\n\nexport function handleAuth(initOptions, onRedirectCallback){\n    return dispatch => {\n      const initAuth0 = async () =>{\n        dispatch(showLoading())\n        const auth0FromHook = await createAuth0Client(initOptions);\n\n        dispatch(setAuth0(auth0FromHook));\n\n        if (window.location.search.includes(\"code=\") &&\n            window.location.search.includes(\"state=\")) {\n          const { appState } = await auth0FromHook.handleRedirectCallback();\n          onRedirectCallback(appState);\n        }\n\n        const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n        dispatch(setIsAuthenticated(isAuthenticated))\n\n        if (isAuthenticated) {\n          const user = await auth0FromHook.getUser();\n\n          // 请求创建用户接口\n          await createUser({\n              auth0_user_id:user['sub'],\n              nickname:user['nickname'],\n              picture_url:user['picture']\n          }).then(res => {\n              dispatch(setUser(res['user']));\n          })\n        }\n        dispatch(hideLoading())\n        dispatch(setLoading(false));\n      }\n\n      initAuth0()\n    };  \n}","import { handleAuth } from './auth'\nimport { handleReceiveVoices } from './voice'\n\nexport function handleInitial(initOptions, onRedirectCallback){\n\treturn dispatch => {\n\t\tdispatch(handleAuth(initOptions, onRedirectCallback))\n\t\tdispatch(handleReceiveVoices())\n\t}\n}","import React, {  useEffect } from 'react';\nimport { Router, Route, Switch } from 'react-router-dom'\nimport history from './utils/history'\nimport './App.css';\nimport Avatar from './components/Avatar'\nimport Profile from './views/Profile'\nimport PrivateRoute from './components/PrivateRoute'\nimport Voice from './views/Voice'\nimport { useDispatch } from 'react-redux'\nimport { handleInitial } from './actions/share'\nimport LoadingBar from 'react-redux-loading-bar'\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nfunction App({\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  ...initOptions\n}) {\n\n  const dispatch = useDispatch()\n  useEffect(() => {\n    dispatch(handleInitial(initOptions, onRedirectCallback))\n  })\n\n  return (\n    <div className=\"App\">\n    \t<Router history={history}>\n        <LoadingBar />\n    \t\t<header>\n    \t\t\t<Avatar />\n    \t\t</header>\n        <main className=\"main\">\n          <Switch>\n            <PrivateRoute exact path={'/profile'} component={Profile} /> \n            <Route path={'/'} component={Voice}/>\n          </Switch>           \n        </main>\n    \t</Router>\n    </div>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import auth from './auth'\nimport voices from './voice'\nimport user from './user'\nimport { combineReducers } from 'redux'\nimport { loadingBarReducer } from 'react-redux-loading-bar'\n\nexport default combineReducers({\n\tuser,\n\tauth,\n\tvoices,\n\tloadingBar:loadingBarReducer\n})","import { SET_USER } from '../actions/auth'\nexport default function user(state = {}, action){\n\tswitch(action.type){\n\t\tcase SET_USER:\n\t\t\treturn {\n\t\t\t\t...action['user']\n\t\t\t}\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","import { SET_IS_AUTHENTICATED, SET_AUTH0, SET_LOADING, SET_POPUP_OPEN } from '../actions/auth'\nexport default function auth(state = {loading:true}, action){\n\tswitch(action.type){\n\t\tcase SET_IS_AUTHENTICATED:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisAuthenticated:action['isAuthenticated']\n\t\t\t}\n\t\tcase SET_AUTH0:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tauth0:action['auth0']\n\t\t\t}\n\t\tcase SET_LOADING:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading:action['loading']\n\t\t\t}\n\t\tcase SET_POPUP_OPEN:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpopupOpen:action['popupOpen']\n\t\t\t}\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","import { RECEIVE_VOICES, ADD_VOICE, TOGGLE_VOICE } from '../actions/voice'\n\nexport default function voices(state = {}, action){\n\tswitch(action.type){\n\t\tcase RECEIVE_VOICES:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.voices\n\t\t\t}\n\t\tcase ADD_VOICE:\n\t\t\tconst voice = action.voice\n\t\t\tlet parent = {}\n\t\t\tif(voice.replying_to){\n\t\t\t\tparent = {\n\t\t\t\t\t[voice.replying_to]:{\n\t\t\t\t\t\t...state[voice.replying_to],\n\t\t\t\t\t\treplies:[...state[voice.replying_to].replies, voice.id]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[voice.id]:voice,\n\t\t\t\t...parent\n\t\t\t}\n\t\tcase TOGGLE_VOICE:\n\t\t\tconst { id:voiceId, authedUser } = action\n\t\t\tconst hasLiked = state[voiceId].likes.includes(authedUser)\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[voiceId]:{\n\t\t\t\t\t...state[voiceId],\n\t\t\t\t\tlikes:hasLiked ? state[voiceId].likes.filter(userId => userId !== authedUser) : [...state[voiceId].likes, authedUser]\n\t\t\t\t}\n\t\t\t}\n\n\t\tdefault :\n\t\t\treturn state\n\t}\n}","const logger = store => next => action => {\n\tconsole.group(action.type)\n\t\tconsole.log('the action is : ', action)\n\t\tconst returnValue = next(action)\n\t\tconsole.log('the state is : ', store.getState())\n\tconsole.groupEnd()\n\n\treturn returnValue\n}\n\nexport default logger","import thunk from 'redux-thunk'\nimport logger from './logger'\nimport { applyMiddleware } from 'redux'\n\nexport default applyMiddleware(thunk, logger)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport history from './utils/history'\nimport auth_config from './auth_config'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport reducer from './reducers'\nimport middleware from './middlewares'\n\nconst onRedirectCallback = appState => {\n  history.push(\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nconst store = createStore(reducer, middleware)\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App\n\t\tdomain={auth_config.domain}\n\t\tclient_id={auth_config.clientId}\n\t\taudience={auth_config.audience}\n\t\tredirect_uri={window.location.origin}\n\t\tonRedirectCallback={onRedirectCallback}\n\t\t/>\n\t</Provider>\n\t, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}